"""
An object with an ID.
"""
interface Node {
  """
  ID of the object.
  """
  id: ID!
}

enum PostType {
  QUESTION
  ANSWER
}

enum VoteType {
  UP_VOTE
  DOWN_VOTE
  FAVORITE
}

"""
Contains information for your query attempt
"""
interface QueryResult {
    """
    Whether or not your query could be completed
    """
    success: Boolean!

    """
    Error message when the query fails, null when successful
    """
    error: String
}

"""
A single query result contains information for your query attempt regarding a specific object type and its object response
"""
type SingleObjectQueryResult implements QueryResult{
    # from query result
    success: Boolean!
    error: String

    """
    Contains your object result, null when query fails
    """
    data: Node
}

"""
A multi object query result contains information for your query attempt regarding a specific object type and its objects response
"""
type MultiObjectQueryResult implements QueryResult{
    # from query result
    success: Boolean!
    error: String

    """
    Contains your list of data objects, empty when query fails
    """
    data: [Node]!
}


"""
A post contains detailed information of stackoverflow post
"""
type Post implements Node {
    # from node
    id: ID!

    """
    Contains the date of the post creation
    #todo: check date format
    """
    creation_date: String!

    """
    Contains the score of this post [no idea how this was calculated on stackoverflow]
    """
    score: Int!

    """
    Contains the type of the post
    """
    post_type_id: PostType!

    """
    Contains the post total views
    """
    view_count: Int!

    """
    Contains the user id of who created this post
    """
    owner_user_id: String!

    """
    Contains the tags applied for this post using | as limiters. e.g |python|javascript|
    """
    tags: String!

    """
    Contains the total answers this post have got
    """
    answer_count: Int!

    """
    Contains the total comments this post have got
    """
    comment_count: Int!

    """
    Contains the total favorite this post have got
    """
    favorite_count: Int!
}

"""
A post contains detailed information of stackoverflow post
"""
type Vote implements Node {
    # from node
    id: ID!

    """
    Votes's post id
    """
    post_id: ID!

    """
    Contains the vote type of this vote
    """
    vote_type_id: VoteType!

    """
    Vote's creation date
    """
    creation_date: String!
}

type PostCreationOverTime {
    week: String!
    count: Int!
}

type MostUsedTagsOvertime {
    week: String
    tag: String!
    count: Int!
}

type PostHistogram {
    # from query result
    errors: [String!]!

    created_overtime: [PostCreationOverTime!]
    most_used_tags_overtime: [MostUsedTagsOvertime!]
}


type Query {
    """
    Retrieves all posts from the system
    """
    listPosts: MultiObjectQueryResult!

    """
    Retrieves a specific post by its unique identifier
    """
    getPost(id: ID!): SingleObjectQueryResult!

    """
    Retrieves all votes from the system
    """
    listVotes: MultiObjectQueryResult!

    """
    Retrieves a specific vote by its unique identifier
    """
    getVote(id: ID!): SingleObjectQueryResult!

    postsHistogram(
        start_date: String!
        end_date: String!
        post_type: PostType
    ): PostHistogram!

}
